@{
    if (Context.GetRouteValue("name") == null || Context.GetRouteValue("name").ToString() == "")
    {
        Context.Response.RedirectToRoute("Home");
        Context.Response.End();
    }

    Storage store = new Storage();
    var name = Context.GetRouteValue("name").ToString();
    Response.ContentType = "image/JPEG";
    Response.AddHeader("Content-Disposition", "attachment; filename=" + name + ".jpg");
    Response.BinaryWrite(store.DownloadFile(name));
    Response.End();

}